(this.webpackJsonpsmps1=this.webpackJsonpsmps1||[]).push([[0],{152:function(e,t,a){"use strict";a.r(t);var o=a(0),l=a.n(o),n=a(48),r=a.n(n),s=(a(56),a(3)),i=a(4),c=a(6),m=a(5),d=a(1),u=a(7),p=(a(57),a(15)),h=a.n(p),f=function(e){function t(e,a){var o;return Object(s.a)(this,t),(o=Object(c.a)(this,Object(m.a)(t).call(this,e,a))).add=o.add.bind(Object(d.a)(o)),o}return Object(u.a)(t,e),Object(i.a)(t,[{key:"add",value:function(e){var t,a,o,l,n=this.props.portfolio,r=this.props.num,s=document.getElementById("symbol_id"+r);if(t=document.getElementById("symbol_id"+r).value.toUpperCase(),!/^[a-zA-Z]+$/.test(t)||t.length>4)return document.getElementById("symbol_id"+r).focus(),alert("The symbol must have 1, 2, 3 or 4 letters and only letters"),e.preventDefault(),!0;var i=document.getElementById("quantity_id"+r);if(a=document.getElementById("quantity_id"+r).value,!/^\d+$/.test(a))return document.getElementById("quantity_id"+r).focus(),alert("The quantity must have only digits"),e.preventDefault(),!0;a=Number(a),l="https://www.alphavantage.co/query?function=GLOBAL_QUOTE&symbol="+t+"&apikey=37AAP0WVUKV2LA7I",console.log("REQ "+l);var c,m,d,u=new XMLHttpRequest;u.open("GET",l,!0);var p=n;if("undefined"!==typeof Storage){if(localStorage[p]){if(d=(c=JSON.parse(localStorage.getItem(p))).map((function(e){return e.symbol})),c.length>=50)return void alert("You can create only 50 different stocks in the same portfolio");if(d.includes(t))return s.value="",i.value="",s.focus(),alert("This stock already exists"),void e.preventDefault();u.onreadystatechange=function(){if(4===u.readyState){var e=JSON.parse(u.responseText);if(!e||!e["Global Quote"]||"undefined"===typeof e["Global Quote"]["02. open"])return void alert("There is no stock for the given symbol "+t);o=Number(e["Global Quote"]["02. open"]),(m={}).symbol=t,m.unitvalue=o,m.quantity=a,m.totalvalue=o*a,console.log("SYM "+t+" "+o+" "+a),c.push(m),localStorage.setItem(p,JSON.stringify(c))}}}else console.log("quantity "+a),u.onreadystatechange=function(){if(console.log("quantity1 "+a),4===u.readyState){console.log("quantity2 "+a);var e=JSON.parse(u.responseText);if(!e||!e["Global Quote"]||"undefined"===typeof e["Global Quote"]["02. open"])return void alert("There is no stock for the given symbol "+t);o=Number(e["Global Quote"]["02. open"]),(m={}).symbol=t,m.unitvalue=o,m.quantity=a,m.totalvalue=o*a,console.log("First SYM "+t+" "+o+" "+a),localStorage.setItem(p,JSON.stringify([m]))}};u.send()}else document.getElementById("container").innerHTML="Sorry, your browser does not support web storage..."}},{key:"render",value:function(){var e=this.props.num,t={};return this.props.disabled&&(t={cursor:"none",opacity:.3}),l.a.createElement("div",{className:this.props.class},l.a.createElement("button",{style:t,className:"open-button",disabled:this.props.disabled,"data-toggle":"modal","data-target":"#exampleModalCenterStock"+e},"Add stock"),l.a.createElement("div",{className:"modal fade",id:"exampleModalCenterStock"+e,tabIndex:"-1",role:"dialog","aria-labelledby":"exampleModalCenterTitleStock"+e,"aria-hidden":"true"},l.a.createElement("div",{className:"modal-dialog modal-dialog-centered",role:"document"},l.a.createElement("div",{className:"modal-content"},l.a.createElement("div",{className:"modal-header"},l.a.createElement("h5",{className:"modal-title",id:"exampleModalCenterTitleStock"+e},"Stock"),l.a.createElement("button",{type:"button",className:"close","data-dismiss":"modal","aria-label":"Close"},l.a.createElement("span",{"aria-hidden":"true"},"\xd7"))),l.a.createElement("div",{className:"modal-body"},l.a.createElement("form",{className:"form-container",id:"formStock"},l.a.createElement("label",{htmlFor:"symbol_id"},l.a.createElement("b",null,"symbol")),l.a.createElement("input",{type:"text",placeholder:"Enter stock",id:"symbol_id"+e,required:!0}),l.a.createElement("label",{htmlFor:"quantity_id"},l.a.createElement("b",null,"quantity")),l.a.createElement("input",{type:"text",placeholder:"Enter quantity",id:"quantity_id"+e,required:!0}),l.a.createElement("button",{type:"submit",className:"btn",onClick:this.add},"Add"),l.a.createElement("button",{type:"button",className:"btn cancel","data-dismiss":"modal"},"Close")))))))}}]),t}(o.Component),y=a(31),v=a.n(y),b=a(49),g=function(e){function t(e,a){var o;return Object(s.a)(this,t),(o=Object(c.a)(this,Object(m.a)(t).call(this,e,a))).list=[],o.perf=o.perf.bind(Object(d.a)(o)),o}return Object(u.a)(t,e),Object(i.a)(t,[{key:"perf",value:function(e){var a,o,l;l=this.props.num;var n,r,s,i=this.props.portfolio,c=document.getElementById("date1"+l),m=document.getElementById("date2"+l),d=this.props.symbols;i=this.props.portfolio;if(document.getElementById("myLargeModalLabel"+l).innerHTML=i+" performance",n=c.value?c.value:startDate,r=m.value?m.value:today,console.log("DATE "+n+"-"+r),n>r)return alert("Starting date must be less than or equal to Ending date"),void e.preventDefault();for(window.self.datasets=[],s=0;s<d.length;s++){o="https://www.alphavantage.co/query?function=TIME_SERIES_DAILY&symbol="+(a=d[s])+"&outputsize=full&apikey=37AAP0WVUKV2LA7I";var u=new XMLHttpRequest;u.open("GET",o,!0),u.onreadystatechange=function(e,a,o){return console.log("First"),function(){if(4===e.readyState){console.log("Second");var s=JSON.parse(e.responseText);if(!s||!s["Time Series (Daily)"]||"undefined"===s["Time Series (Daily)"])return void alert("There is no history for symbol "+a);for(var i=Object.keys(s["Time Series (Daily)"]).reverse(),c=i.slice(),m=c.length-1;m>=0;m--)(c[m]>r||c[m]<n)&&c.splice(m,1);var u=i.indexOf(c[0]),p=i.indexOf(c[c.length-1]),h=Object.values(s["Time Series (Daily)"]).reverse().map((function(e){return e["4. close"]})).slice(u,p+1),f="rgb("+parseInt(255/d.length)*o+", "+parseInt(255/d.length)*(d.length-o)+", "+parseInt(255/d.length)*o+")",y={label:a,backgroundColor:f,borderColor:f,data:h,fill:!1};window.self.datasets.push(y),window.self.datasets.length===d.length&&(console.log("Third"),t.show(c,window.self.datasets,l))}}}(u,a,s),u.send()}}},{key:"render",value:function(){var e=this.props.num,a=t.formatDate(new Date),o=new Date;o.setMonth(o.getMonth()-1),o=t.formatDate(o);var n={};return this.props.disabled&&(n={cursor:"none",opacity:.3}),l.a.createElement("div",{className:this.props.class},l.a.createElement("button",{type:"button",style:n,className:"open-button perf",disabled:this.props.disabled,"data-toggle":"modal","data-target":"#myLargeModal"+e,onClick:this.perf},"Perf data"),l.a.createElement("div",{className:"modal fade bd-example-modal-xl",id:"myLargeModal"+e,tabIndex:"-1",role:"dialog","aria-labelledby":"myLargeModalLabel"+e,"aria-hidden":"true"},l.a.createElement("div",{className:"modal-dialog modal-dialog-centered modal-xl"},l.a.createElement("div",{className:"modal-content"},l.a.createElement("div",{className:"modal-header"},l.a.createElement("h5",{className:"modal-title",id:"myLargeModalLabel"+e}),l.a.createElement("button",{type:"button",className:"btn btn-secondary","data-dismiss":"modal"},"Close")),l.a.createElement("div",{className:"modal-body"},l.a.createElement("canvas",{id:"myChart"+e})),l.a.createElement("div",{className:"container"},l.a.createElement("div",{className:"row justify-content-center"},l.a.createElement("div",{className:"col-9 offset-3 col-md-5 offset-md-0 form-check form-check-inline py-1 py-md-0"},l.a.createElement("label",{className:"form-check-label",htmlFor:"date1"+e},"Starting time"),"\xa0",l.a.createElement("input",{className:"form-check-input",type:"date",id:"date1"+e,defaultValue:o,min:"1998-01-02",max:a})),l.a.createElement("div",{className:"col-9 offset-3 col-md-5 offset-md-0 form-check form-check-inline py-1 py-md-0"},l.a.createElement("label",{className:"form-check-label",htmlFor:"date2"+e},"Ending time\xa0"),"\xa0",l.a.createElement("input",{className:"form-check-input",type:"date",id:"date2"+e,defaultValue:a,min:"1998-01-02",max:a})),l.a.createElement("div",{className:"py-1 py-md-0"},l.a.createElement("button",{type:"button",className:"btn btn-primary",onClick:this.perf},"Show"))))))))}}],[{key:"show",value:function(e,t,a){console.log("datasetes",t),console.log("dateRange",e),console.log("numofPort",a);var o=e.map((function(e){return v()(e)}));console.log("PORT "+a);var l=document.getElementById("myChart"+a).getContext("2d");console.log("CTX "+l);new b.a(l,{type:"line",data:{labels:o,datasets:t},options:{animation:{duration:0},scales:{xAxes:[{type:"time"}]}}})}},{key:"formatDate",value:function(e){var t=new Date(e),a=""+(t.getMonth()+1),o=""+t.getDate(),l=t.getFullYear();return a.length<2&&(a="0"+a),o.length<2&&(o="0"+o),[l,a,o].join("-")}}]),t}(o.Component),E=function(e){function t(e,a){var o;return Object(s.a)(this,t),(o=Object(c.a)(this,Object(m.a)(t).call(this,e,a))).count=0,o.portfolios=[],o.flag=!1,o.compareBy=function(e){return function(t,a){return t[e]<a[e]?-1:t[e]>a[e]?1:0}},o.sortBy=function(e){var t=o.state.list.slice();t.sort(o.compareBy(e)),o.setState({list:t})},o.state={selectedStocks:[],list:[],rate:1},o.removeSelected=o.removeSelected.bind(Object(d.a)(o)),o.checked=o.checked.bind(Object(d.a)(o)),o.rateClick=o.rateClick.bind(Object(d.a)(o)),o.sortBy=o.sortBy.bind(Object(d.a)(o)),o.compareBy=o.compareBy.bind(Object(d.a)(o)),o}return Object(u.a)(t,e),Object(i.a)(t,[{key:"showPort",value:function(){var e=this.props.portfolio;"undefined"!==typeof Storage?localStorage[e]&&(this.state.list=JSON.parse(localStorage.getItem(e))):document.getElementById("container").innerHTML="Sorry, your browser does not support web storage..."}},{key:"checked",value:function(e){var t=e.target.id.substring(1);this.state.selectedStocks[t]=e.target.checked;for(var a=0;a<this.state.list.length&&!this.state.selectedStocks[a];a++);if(a<this.state.list.length){this._remove.disabled=!1,this._remove.style.cursor="pointer",this._remove.style.opacity="0.8";var o=this;h()(this._remove).hover((function(){o._remove.style.opacity="1"}),(function(){o._remove.style.opacity="0.8"}))}else this._remove.disabled=!0,this._remove.style.cursor="none",this._remove.style.opacity="0.3",h()(this._remove).hover((function(){}))}},{key:"removeSelected",value:function(e){this._remove.disabled=!0,this._remove.style.cursor="none",this._remove.style.opacity="0.3",h()(this._remove).hover((function(){}));for(var t=this.props.portfolio,a=[],o=0;o<this.state.list.length;o++)this.state.selectedStocks[o]||a.push(this.state.list[o]),h()("#"+this.props.num+o).prop("checked",!1);this.state.list=a.slice(),this.setState({selectedStocks:this.state.selectedStocks}),"undefined"!==typeof Storage?localStorage[t]&&localStorage.setItem(t,JSON.stringify(this.state.list)):document.getElementById("container").innerHTML="Sorry, your browser does not support web storage..."}},{key:"rateClick",value:function(e){!0===this._euro.checked?(this.state.rate=1,this.setState({rate:this.state.rate})):(this.findRate(),this.setState({rate:this.rate}))}},{key:"findRate",value:function(){"undefined"!==typeof Storage?sessionStorage.rate&&(this.rate=sessionStorage.getItem("rate")):document.getElementById("container").innerHTML="Sorry, your browser does not support web storage..."}},{key:"componentWillMount",value:function(){this.showPort()}},{key:"componentDidMount",value:function(){this._euro.checked=!0}},{key:"render",value:function(){var e=this,t=this,a=[],o=0,n=[],r="&euro;";r=1===this.state.rate?"\u20ac":"$";for(var s=0;s<this.state.list.length;s++){var i=this.state.list[s].symbol;n.push(i);var c=parseFloat(this.state.list[s].unitvalue*this.state.rate).toFixed(2),m=this.state.list[s].quantity,d=parseFloat(this.state.list[s].totalvalue*this.state.rate).toFixed(2),u=l.a.createElement("tr",{key:s},l.a.createElement("td",null,i),l.a.createElement("td",null,c+r),l.a.createElement("td",null,m),l.a.createElement("td",null,d+r),l.a.createElement("td",null,l.a.createElement("input",{id:this.props.num.toString()+s,type:"checkbox",onChange:this.checked})));o+=Number(d),a.push(u)}o=parseFloat(o.toString()).toFixed(2);var p=0===this.state.list.length,h=50===this.state.list.length;return l.a.createElement("div",{className:"col portfolio rel"},l.a.createElement("div",{className:"row"},l.a.createElement("div",{className:"col-12 col-sm-4 title"},l.a.createElement("p",null,this.props.portfolio)),l.a.createElement("div",{className:"col col-sm-7"},l.a.createElement("p",null,"Show in \u20ac\xa0",l.a.createElement("input",{type:"radio",disabled:p,name:this.props.portfolio,ref:function(e){t._euro=e},onChange:this.rateClick}),"\u2002 Show in $\xa0",l.a.createElement("input",{type:"radio",disabled:p,name:this.props.portfolio,ref:function(e){t._checked=e},onChange:this.rateClick}))),l.a.createElement("div",{className:"col-1 px-1"},l.a.createElement("p",null,l.a.createElement("button",{id:this.props.num,type:"submit",className:"button",onClick:this.props.removePort,key:(this.count++).toString()},"x")))),l.a.createElement("div",{className:"row horizscroll"},l.a.createElement("div",{className:"col-12"},l.a.createElement("table",{className:"portfoliotable",id:"table"+this.props.num},l.a.createElement("thead",{id:"thead"+this.props.num},l.a.createElement("tr",null,l.a.createElement("th",{onClick:function(){return e.sortBy("symbol")}},"Name"),l.a.createElement("th",{onClick:function(){return e.sortBy("unitvalue")}},"Unit value"),l.a.createElement("th",{onClick:function(){return e.sortBy("quantity")}},"Quantity"),l.a.createElement("th",{onClick:function(){return e.sortBy("totalvalue")}},"Total value"),l.a.createElement("th",null,"Select"))),l.a.createElement("tbody",{id:"thead"+this.props.num,ref:function(e){t._table=e}},a)))),l.a.createElement("div",{className:"row py-1"},l.a.createElement("div",{className:"col-12 title"},l.a.createElement("p",null,"Total value of ",this.props.portfolio,": ",o+r))),l.a.createElement("div",{className:"row"},l.a.createElement("br",null),l.a.createElement("br",null)),l.a.createElement("div",{className:"row down"},l.a.createElement(f,{num:this.props.num,portfolio:this.props.portfolio,disabled:h,class:"col-6 col-md"}),l.a.createElement(g,{num:this.props.num,portfolio:this.props.portfolio,symbols:n,class:"col-6 col-md",disabled:p}),l.a.createElement("div",{className:"col-6 col-md"},l.a.createElement("button",{className:"open-button-remove downbut3",ref:function(e){t._remove=e},onClick:this.removeSelected},"Remove selected"))))}}]),t}(o.Component),S=function(e){function t(e,a){var o;return Object(s.a)(this,t),(o=Object(c.a)(this,Object(m.a)(t).call(this,e,a))).add=o.add.bind(Object(d.a)(o)),o}return Object(u.a)(t,e),Object(i.a)(t,[{key:"add",value:function(e){var t,a,o;if(o=document.getElementById("name_id"),0!==(a=document.getElementById("name_id").value).length)if("undefined"!==typeof Storage)if(localStorage.portfolios){if((t=JSON.parse(localStorage.getItem("portfolios"))).length>=10)return void alert("You can create only 10 portfolios");if(t.includes(a))return o.value="",o.focus(),alert("This portfolio already exists"),void e.preventDefault();t.push(a),localStorage.setItem("portfolios",JSON.stringify(t))}else localStorage.setItem("portfolios",JSON.stringify([a]));else document.getElementById("container").innerHTML="Sorry, your browser does not support web storage...";else alert("The portfolio name is mandatory")}},{key:"render",value:function(){var e={};return this.props.disabled&&(e={cursor:"none",opacity:.3}),l.a.createElement("div",{className:this.props.class},l.a.createElement("button",{style:e,className:"open-button port",disabled:this.props.disabled,"data-toggle":"modal","data-target":"#exampleModalCenter"},"Add new portfolio"),l.a.createElement("div",{className:"modal fade",id:"exampleModalCenter",tabIndex:"-1",role:"dialog","aria-labelledby":"exampleModalCenterTitle","aria-hidden":"true"},l.a.createElement("div",{className:"modal-dialog modal-dialog-centered",role:"document"},l.a.createElement("div",{className:"modal-content"},l.a.createElement("div",{className:"modal-header"},l.a.createElement("h5",{className:"modal-title",id:"exampleModalCenterTitle"},"Portfolio"),l.a.createElement("button",{type:"button",className:"close","data-dismiss":"modal","aria-label":"Close"},l.a.createElement("span",{"aria-hidden":"true"},"\xd7"))),l.a.createElement("div",{className:"modal-body"},l.a.createElement("form",{className:"form-container",id:"form1"},l.a.createElement("label",{htmlFor:"name_id"},l.a.createElement("b",null,"name")),l.a.createElement("input",{type:"text",placeholder:"Enter portfolio",id:"name_id",required:!0}),l.a.createElement("button",{type:"submit",className:"btn",onClick:this.add},"Add"),l.a.createElement("button",{type:"button",className:"btn cancel","data-dismiss":"modal"},"Close")))))))}}]),t}(o.Component),k=function(e){function t(e,a){var o;return Object(s.a)(this,t),(o=Object(c.a)(this,Object(m.a)(t).call(this,e,a))).count=0,o.list=[],o.state={list:[]},o.removePortfolio=o.removePortfolio.bind(Object(d.a)(o)),o}return Object(u.a)(t,e),Object(i.a)(t,[{key:"show",value:function(){"undefined"!==typeof Storage?localStorage.portfolios&&(this.list=JSON.parse(localStorage.getItem("portfolios"))):document.getElementById("container").innerHTML="Sorry, your browser does not support web storage..."}},{key:"rateInit",value:function(){var e=new XMLHttpRequest;e.open("GET","https://www.alphavantage.co/query?function=CURRENCY_EXCHANGE_RATE&from_currency=EUR&to_currency=USD&apikey=85YZX4JTG68SG4B2",!0),window.self=this,e.onreadystatechange=function(){if(4===e.readyState){var a=JSON.parse(e.responseText);if(!a||!a["Realtime Currency Exchange Rate"]||"undefined"===typeof a["Realtime Currency Exchange Rate"]["5. Exchange Rate"])return alert("The exchange rate service is not responding. Wait 30 seconds and try again or reload the page"),void setTimeout(window.self.rateInit,3e4);var o=Number(a["Realtime Currency Exchange Rate"]["5. Exchange Rate"]);t.showRate(o)}},e.send()}},{key:"removePortfolio",value:function(e){for(var t="portfolios",a=Number(e.target.id),o=this.list[a],l=[],n=0;n<this.list.length;n++)n!==a&&l.push(this.list[n]);this.list=l.slice(),this.setState({list:l}),"undefined"!==typeof Storage?(localStorage[o]&&localStorage.removeItem(o),localStorage[t]&&localStorage.setItem(t,JSON.stringify(this.list))):document.getElementById("container").innerHTML="Sorry, your browser does not support web storage..."}},{key:"componentWillMount",value:function(){this.rateInit()}},{key:"render",value:function(){this.show();for(var e=[],t=0;t<this.list.length;t++)t%3===0&&t<this.list.length-2?e.push(l.a.createElement("div",{className:"row",key:t},l.a.createElement(E,{num:t,portfolio:this.list[t],rate:this.rate,removePort:this.removePortfolio,key:t}),l.a.createElement(E,{num:t+1,portfolio:this.list[t+1],rate:this.rate,removePort:this.removePortfolio,key:t+1}),l.a.createElement(E,{num:t+2,portfolio:this.list[t+2],rate:this.rate,removePort:this.removePortfolio,key:t+2}))):t%3===0&&t===this.list.length-2?e.push(l.a.createElement("div",{className:"row",key:t},l.a.createElement(E,{num:t,portfolio:this.list[t],rate:this.rate,removePort:this.removePortfolio,key:t}),l.a.createElement(E,{num:t+1,portfolio:this.list[t+1],rate:this.rate,removePort:this.removePortfolio,key:t+1}))):t%3===0&&t===this.list.length-1&&e.push(l.a.createElement("div",{className:"row",key:t},l.a.createElement(E,{num:t,portfolio:this.list[t],rate:this.rate,removePort:this.removePortfolio,key:t})));var a=10===this.list.length;return l.a.createElement("div",null,l.a.createElement("div",{className:"row abs"},l.a.createElement(S,{disabled:a,class:"col-12 py-3"})),l.a.createElement("div",null,e))}}],[{key:"showRate",value:function(e){"undefined"!==typeof Storage?sessionStorage.rate||sessionStorage.setItem("rate",e):document.getElementById("container").innerHTML="Sorry, your browser does not support web storage..."}}]),t}(o.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));r.a.render(l.a.createElement(k,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},51:function(e,t,a){e.exports=a(152)},56:function(e,t,a){},57:function(e,t,a){}},[[51,1,2]]]);
//# sourceMappingURL=main.1b01e2ac.chunk.js.map